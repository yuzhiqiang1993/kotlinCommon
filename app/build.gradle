plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'kotlin-kapt'
//    id 'com.aliyun.ams.emas-services'
}

println "getRootDir():${getRootDir()}"

apply from: file("${getRootDir()}/gradle_script/bytex.gradle")

android {

    compileSdk compile_sdk_version
    defaultConfig {
        applicationId "com.yzq.kotlincommon"
        minSdk min_sdk_version
        targetSdk target_sdk_version
        versionCode version_code
        versionName version_name
        multiDexEnabled true
        vectorDrawables.useSupportLibrary = true
        resConfigs "zh"
        ndk {
            abiFilters "arm64-v8a", "armeabi-v7a"
        }
    }

    signingConfigs {

        release {
            storePassword rootProject.ext.signConfigs.storePwd
            keyAlias rootProject.ext.signConfigs.keyAlias
            keyPassword rootProject.ext.signConfigs.keypwd
            storeFile file(rootProject.ext.signConfigs.storeFilePath)
            v2SigningEnabled true
        }
    }

    buildTypes {

        debug {
            signingConfig signingConfigs.release
            minifyEnabled false
            zipAlignEnabled false
            shrinkResources false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }

        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            zipAlignEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    flavorDimensions "channel", "env"
    productFlavors {


        dev {
            dimension "env"
            manifestPlaceholders = [
                    "APP_NAME"          : "KotlinCommon-dev",
                    "META_CHANNEL_VALUE": "app"
            ]
        }
        prd {
            dimension "env"
            manifestPlaceholders = [
                    "APP_NAME"          : "KotlinCommon",
                    "META_CHANNEL_VALUE": "app"
            ]
        }

        wandoujia {
            dimension "channel"
            manifestPlaceholders = [
                    "APP_NAME"          : "KotlinCommon-wandoujia",
                    "META_CHANNEL_VALUE": "wandoujia"
            ]
        }
        yingyongbao {
            dimension "channel"
            manifestPlaceholders = [
                    "APP_NAME"          : "KotlinCommon-yingyongbao",
                    "META_CHANNEL_VALUE": "yingyongbao"
            ]
        }

    }

    buildFeatures {
        dataBinding true
        viewBinding true
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = '1.8'
    }


}


kapt {
    arguments {
        arg("AROUTER_MODULE_NAME", project.getName())
    }
}


dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    implementation 'androidx.appcompat:appcompat:1.4.0'
    implementation 'com.google.android.material:material:1.4.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.2'

    kapt "com.alibaba:arouter-compiler:$arouter_compiler"
    implementation "com.github.yuzhiqiang1993:zxing:${zxing_version}"
    implementation "org.jsoup:jsoup:${jsoup_version}"
    kapt "androidx.room:room-compiler:$room_version"

    implementation "androidx.viewpager2:viewpager2:${viewpager2}"

    implementation "com.github.zhpanvip:BannerViewPager:${bannerViewPager}"

    implementation project(':common')
    implementation "io.github.yuzhiqiang1993:xeon_bsdiff:1.0.1"

    if (isModule.toBoolean()) {
        implementation project(':gao_de_map')
    }

    implementation 'com.github.aiceking:AppStartFaster:2.0.0'

    //崩溃分析
    implementation 'com.aliyun.ams:alicloud-android-ha-crashreporter:1.2.5'
    //移动日志
    implementation('com.aliyun.ams:alicloud-android-tlog:1.1.4.1-open')
    //性能监控
    implementation('com.aliyun.ams:alicloud-android-apm:1.0.10.0-open')
    //移动分析  埋点
//    implementation 'com.aliyun.ams:alicloud-android-man:1.2.6'
    //推送
    implementation 'com.aliyun.ams:alicloud-android-push:3.7.3'
    //公共依赖库
//    implementation 'com.aliyun.ams:alicloud-android-utdid:2.5.2'
//    implementation 'com.aliyun.ams:alicloud-android-utils:2.0.0'
//    implementation 'com.aliyun.ams:alicloud-android-ut:5.4.4'
//    implementation 'com.aliyun.ams:alicloud-android-beacon:1.0.7'
    implementation('com.aliyun.ams:alicloud-android-ha-adapter:1.1.5.1-open')


}


task testTask() {


    doFirst {
        println "testTask执行 doFirst"
    }

    doLast {
        println "testTask执行 doLast"
    }

}

/*自定义一个task*/
task testTask1() {
    dependsOn testTask
    doLast {
        println("testTask1执行")
    }


}

/*project表示当前module的项目*/
println "我是App工程，${project.name},我的路径是:${project.projectDir}"


